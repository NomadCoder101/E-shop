
    User Management
    Product/Inventory Management
    Shopping Cart Function
    Payment Management
    Shipping/Logistics Management




    Marketing Functions
    Help Desk/Support
    Advanced Analytics
    Third-Party Integrations



Key Components of an Ecommerce Database

A good ecommerce database has the capacity for many components in it. Here are some of the basic DB components that you should check for:

    Product Data
    Customer Data
    Order Data
    Inventory Management
    User Authentication and Security
    Payment and Financial Data
    Website Content and CMS
    Analytics and Reporting


=============


/*
eCommerce Database Sample Data

This was created for MySQL, but will work for other databases with some minor changes.

You'll first need to create a new database on MySQL to store these tables.
*/

/*
Drop tables so we can rerun the script
*/
DROP TABLE IF EXISTS review_rating_type;
DROP TABLE IF EXISTS rating_type;
DROP TABLE IF EXISTS product_variation;
DROP TABLE IF EXISTS size_option;
DROP TABLE IF EXISTS size_category;
DROP TABLE IF EXISTS product_review;
DROP TABLE IF EXISTS product_item;
DROP TABLE IF EXISTS product_image;
DROP TABLE IF EXISTS product_attribute;
DROP TABLE IF EXISTS product;
DROP TABLE IF EXISTS product_category;
DROP TABLE IF EXISTS colour;
DROP TABLE IF EXISTS brand;
DROP TABLE IF EXISTS attribute_option;
DROP TABLE IF EXISTS attribute_type;


/*
Attribute Type
*/

CREATE TABLE attribute_type (
  attribute_type_id int NOT NULL,
  attribute_name varchar(100) DEFAULT NULL,
  PRIMARY KEY (attribute_type_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO attribute_type VALUES (1,'Sale/New Season'),(2,'Length'),(3,'Body Fit'),(4,'Colour'),(5,'Style'),(6,'Sleeve Length'),(7,'Neckline');

/*
Attribute Option
*/

CREATE TABLE attribute_option (
  attribute_option_id int NOT NULL,
  attribute_type_id int DEFAULT NULL,
  attribute_option_name varchar(100) DEFAULT NULL,
  PRIMARY KEY (attribute_option_id),
  KEY fk_atop_attype (attribute_type_id),
  CONSTRAINT fk_atop_attype FOREIGN KEY (attribute_type_id) REFERENCES attribute_type (attribute_type_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO attribute_option VALUES (1,1,'New Season'),(2,1,'Sale'),(3,2,'Maxi'),(4,2,'Midi'),(5,2,'Mini'),(6,2,'Over the Knee'),(7,3,'Main Collection'),(8,3,'Plus Size'),(9,3,'Petite'),(10,7,'V Neck'),(11,7,'Crew Neck');


/*
Brand
*/


CREATE TABLE brand (
  brand_id int NOT NULL,
  brand_name varchar(200) DEFAULT NULL,
  brand_description varchar(2000) DEFAULT NULL,
  PRIMARY KEY (brand_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO brand VALUES
(1,'Jack & Jones','Founded in the 90s as a jeanswear brand, Danish label Jack & Jones has since gone on to expand its sartorial offering to include everything from jumpers, jackets and T-shirts to shoes, underwear and accessories (alongside more of its flex-worthy denim, of course). Scroll the Jack & Jones at ASOS edit to check out our latest drop of the brand’s laid-back pieces.'),
(2,'ASOS DESIGN','This is ASOS DESIGN – your go-to for all the latest trends, no matter who you are, where you’re from and what you’re up to. Exclusive to ASOS, our universal brand is here for you, and comes in Plus and Tall. Created by us, styled by you.');

/*
Colour
*/

CREATE TABLE colour (
  colour_id int NOT NULL,
  colour_name varchar(100) DEFAULT NULL,
  PRIMARY KEY (colour_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO colour VALUES (1,'Navy Blazer'),(2,'Black'),(3,'Rosin'),(4,'Brown'),(5,'Burgundy');

/*
Product Category
*/

CREATE TABLE product_category (
  product_category_id int NOT NULL,
  category_name varchar(100) DEFAULT NULL,
  category_image varchar(400) DEFAULT NULL,
  category_description varchar(2000) DEFAULT NULL,
  parent_product_category_id int DEFAULT NULL,
  PRIMARY KEY (product_category_id),
  KEY fk_prodcat_parent (parent_product_category_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO product_category VALUES 
(1,'Dresses','/images/dresses_women.png',NULL,14),
(2,'Coats + Jackets','/images/coats_women.png',NULL,14),
(3,'Shoes + Sneaks','/images/shoes_women.png','Shoes – we understand. At least when you''re looking up sale shoes from this edit, keeping up with the latest trends doesn''t mean breaking the bank. Discover wardrobe staples and seasonal designs in our sale shoes edit and put your best foot forward at work, the weekend, or in the gym. For summer-ready sale sandals, ASOS DESIGN has you covered with statement-making block heels, espadrilles and everyday sliders in memorable shades. Need a new pair of work shoes? We''ve got plenty of suitable options, including smart leather brogues and versatile flats with cut-outs and buckle detailing. Filter by adidas Originals for women''s sale trainers that''ll work for both workouts and weekends. Choose chunky designs in seasonal prints and standout finishes, or shop classic fitness performance trainers and elevate your workout. New boots? Turn to Truffle Collection for durable ankle boots in leather-look finishes and over-the-knee options in soft faux suede that''ll have you feeling fresh year-round. Whether you''re after flats, boots,or a pair of new heels, keep scrolling for discounted pieces in our women''s shoe sale.',14),
(4,'Sports Stuff','/images/sports_women.png',NULL,14),
(5,'Gifts','/images/gifts_women.png',NULL,14),
(6,'£ 10 and Under','/images/10_under_women.png',NULL,14),
(7,'Coats + Jackets','/images/coats_men.png','Layer up for less with key outerwear in our men''s sale. We''ve got all the essentials, from smart coats that''ll serve you well for work and formal events to sale jackets to add to your casualwear rotation. For new-season looks with affordable price tags, turn to our own ASOS DESIGN range. Pick out cool utility designs for those transitional times of year, plus bomber jackets in soft jersey materials. Wedding on the agenda? Find that dress-code-appropriate suit jacket in a fabric, colour and print to suit your individual style. When it comes to casual everyday outerwear, you can''t beat men''s sale coats from Brave Soul. Shop for hooded parkas and padded coats for colder days or find that staple lightweight raincoat in a versatile shade. Been holding out for a rocker jacket? Filter by Barney''s Originals for cool men''s leather jacket sale options in smooth real leather, suedette and faux finishes. You''ll find classic black styles as well as those featuring coloured panels and snug borg collars. Nab your ideal top layers with options from all the top menswear brands in our men''s coat sale edit.',13),
(8,'Suits','/images/suits_men.png',NULL,13),
(9,'Shirts','/images/shirts_men.png',NULL,13),
(10,'Shoes + Sneaks','/images/shoes_men.png',NULL,13),
(11,'£ 10 and Under','/images/10_under_men.png',NULL,13),
(12,'Gifts','/images/gifts_man.png',NULL,13),
(13,'Men','/images/men.png',NULL,NULL),
(14,'Women','/images/women.png',NULL,NULL);

ALTER TABLE  product_category
ADD CONSTRAINT fk_prodcat_parent FOREIGN KEY (parent_product_category_id) REFERENCES product_category (product_category_id);

/*
Product
*/

CREATE TABLE product (
  product_id int NOT NULL,
  product_name varchar(500) DEFAULT NULL,
  product_category_id int DEFAULT NULL,
  product_description varchar(1000) DEFAULT NULL,
  brand_id int DEFAULT NULL,
  model_height varchar(50) DEFAULT NULL,
  model_wearing varchar(50) DEFAULT NULL,
  care_instructions varchar(200) DEFAULT NULL,
  about varchar(200) DEFAULT NULL,
  PRIMARY KEY (product_id),
  KEY fk_prod_prodcategory (product_category_id),
  KEY fk_prod_brand (brand_id),
  CONSTRAINT fk_prod_brand FOREIGN KEY (brand_id) REFERENCES brand (brand_id),
  CONSTRAINT fk_prod_prodcategory FOREIGN KEY (product_category_id) REFERENCES product_category (product_category_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;



INSERT INTO product VALUES 
(1,'Jack & Jones parka with faux fur hood in navy',7,'Your go-to for cooler climes. Fixed hood. Faux-fur trim. Zip and press-stud fastening. Functional pockets. Regular fit',1,'183cm / 6 ft 0 in','Medium','Machine wash according to instructions on care label','Plain-woven fabric. Main: 100% Polyester.'),
(2,'ASOS DESIGN oversized wool mix overcoat in brown',7,'It''s the outerwear for us. Peak lapels. Button placket. Centre vent. Oversized fit',2,'185cm / 6 ft 1 in','Medium','Dry clean only','Wool-mix fabric. Lining: 100% Polyester, Main: 51% Polyester, 16% Wool, 13% Acrylic, 10% Viscose, 7% Polyamide, 3% Cotton.'),
(3,'ASOS DESIGN puffer gilet in brown',7,'Low-key layering. Funnel neck. Zip fastening. Side pockets. Regular fit',2,'185cm / 6 ft 1 in','Medium','Machine wash according to instructions on care label','Smooth woven fabric: padded for warmth. Lining: 100% Polyester, Shell: 100% Polyester, Wadding: 100% Polyester.'),
(4,'ASOS DESIGN lightweight bomber jacket in burgundy',7,'Stand out, stay warm. Notch collar. Button placket. Tie waist. Side pockets. Oversized fit',2,'185cm / 6 ft 1 in','Medium',NULL,'Twill: semi-structured fabric with a parallel-rib pattern. Lining: 100% Polyester, Main: 65% Polyester, 35% Cotton.');

/*
Product Attribute
*/

CREATE TABLE product_attribute (
  product_id int DEFAULT NULL,
  attribute_option_id int DEFAULT NULL,
  KEY fk_prodat_prod (product_id),
  KEY fk_prodat_prod_atop (attribute_option_id),
  CONSTRAINT fk_prodat_prod FOREIGN KEY (product_id) REFERENCES product (product_id),
  CONSTRAINT fk_prodat_prod_atop FOREIGN KEY (attribute_option_id) REFERENCES attribute_option (attribute_option_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO product_attribute VALUES (1,2),(1,5),(1,10),(2,2),(2,4),(2,11);

/*
Product Image
*/

CREATE TABLE product_image (
  image_id int NOT NULL,
  product_id int DEFAULT NULL,
  image_filename varchar(400) DEFAULT NULL,
  product_item_id int DEFAULT NULL,
  PRIMARY KEY (image_id),
  KEY fk_prodimage_product (product_id),
  CONSTRAINT fk_prodimage_product FOREIGN KEY (product_id) REFERENCES product (product_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO product_image VALUES (1,2,'image004.png',2),(2,2,'image009.png',2),(3,1,'image013.png',1),(4,1,'image020.png',1),(5,4,'image006.png',4),(6,4,'image001.png',4),(7,3,'image019.png',3),(8,3,'image042.png',3);


/*
Product Item
*/

CREATE TABLE product_item (
  product_item_id int NOT NULL,
  product_id int DEFAULT NULL,
  colour_id int DEFAULT NULL,
  original_price int DEFAULT NULL,
  sale_price int DEFAULT NULL,
  product_code varchar(20) DEFAULT NULL,
  PRIMARY KEY (product_item_id),
  KEY fk_proditem_product (product_id),
  KEY fk_proditem_colour (colour_id),
  CONSTRAINT fk_proditem_colour FOREIGN KEY (colour_id) REFERENCES colour (colour_id),
  CONSTRAINT fk_proditem_product FOREIGN KEY (product_id) REFERENCES product (product_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO product_item VALUES (1,1,1,6500,3900,'129299186'),(2,1,2,6500,3900,'129299185'),(3,1,3,6500,3600,'129299187'),(4,2,4,7500,4500,'128900088'),(5,3,4,3200,1450,'128825389'),(6,4,5,2800,1500,'122554464');

/*
Product Review
*/

CREATE TABLE product_review (
  review_id int NOT NULL,
  product_id int DEFAULT NULL,
  review_title varchar(100) DEFAULT NULL,
  review_rating int DEFAULT NULL,
  review_comment varchar(500) DEFAULT NULL,
  review_date date DEFAULT NULL,
  PRIMARY KEY (review_id),
  KEY fk_prodreview_product (product_id),
  CONSTRAINT fk_prodreview_product FOREIGN KEY (product_id) REFERENCES product (product_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO product_review VALUES (1,1,'Great',5,'I bought this coat for my partner. He was very happy with his coat. The size was good also. True to size. I would definitely recommend this Parker','2024-01-04'),(2,1,'Great jacket!',5,'I am very satisfied with the quality and the price','2023-12-29'),(3,1,'Nice!',5,'Nice and warm, comfy, good size, husband happy with it.','2023-12-05');

/*
Size Category
*/

CREATE TABLE size_category (
  category_id int DEFAULT NULL,
  category_name varchar(100) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

INSERT INTO size_category VALUES (1,'Men Clothing'),(2,'Men Shoes');

/*
Size Option
*/

CREATE TABLE size_option (
  size_id int NOT NULL,
  size_name varchar(100) DEFAULT NULL,
  sort_order int DEFAULT NULL,
  size_category_id int DEFAULT NULL,
  PRIMARY KEY (size_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO size_option VALUES (1,'XS - Chest 92cm',1,NULL),(2,'S - Chest 96cm',2,NULL),(3,'M - Chest 100cm',3,NULL),(4,'L - Chest 104cm',4,NULL),(5,'XL - Chest 112cm',5,NULL),(6,'XXL - Chest 120cm',6,NULL),(7,'3XL',7,NULL);

/*
Product Variation
*/

CREATE TABLE product_variation (
  variation_id int NOT NULL,
  product_item_id int DEFAULT NULL,
  size_id int DEFAULT NULL,
  qty_in_stock int DEFAULT NULL,
  PRIMARY KEY (variation_id),
  KEY fk_prodvar_proditem (product_item_id),
  KEY fk_prodvar_size (size_id),
  CONSTRAINT fk_prodvar_proditem FOREIGN KEY (product_item_id) REFERENCES product_item (product_item_id),
  CONSTRAINT fk_prodvar_size FOREIGN KEY (size_id) REFERENCES size_option (size_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO product_variation VALUES (1,1,7,4),(2,2,7,7),(3,3,7,0),(4,4,NULL,NULL),(5,5,NULL,NULL),(6,6,NULL,NULL),(7,1,1,15),(8,1,2,8),(9,1,3,10),(10,1,4,35),(11,1,5,41),(12,1,6,0),(13,2,1,4),(14,2,2,19),(15,2,3,0),(16,2,4,0),(17,2,5,5),(18,2,6,24),(19,3,1,3),(20,3,2,9),(21,3,3,0),(22,3,4,42),(23,3,5,18),(24,3,6,62);

/*
Rating Type
*/


CREATE TABLE rating_type (
  rating_type_id int NOT NULL,
  rating_name varchar(20) DEFAULT NULL,
  label_min varchar(20) DEFAULT NULL,
  label_max varchar(20) DEFAULT NULL,
  PRIMARY KEY (rating_type_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


INSERT INTO rating_type VALUES (1,'Fit','Runs Small','Runs Large'),(2,'Quality','Poor','Great');

/*
Review Rating Type
*/

CREATE TABLE review_rating_type (
  review_id int DEFAULT NULL,
  rating_type_id int DEFAULT NULL,
  rating_value int DEFAULT NULL,
  KEY fk_rrt_review (review_id),
  KEY fk_rrt_ratingtype (rating_type_id),
  CONSTRAINT fk_rrt_ratingtype FOREIGN KEY (rating_type_id) REFERENCES rating_type (rating_type_id),
  CONSTRAINT fk_rrt_review FOREIGN KEY (review_id) REFERENCES product_review (review_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;



INSERT INTO review_rating_type VALUES (1,1,5),(2,1,6),(3,1,7),(1,2,10),(2,2,10),(3,2,10);


==========

first draft 

from django.db import models

class AttributeType(models.Model):
    attribute_type_id = models.AutoField(primary_key=True)
    attribute_name = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.attribute_name


class AttributeOption(models.Model):
    attribute_option_id = models.AutoField(primary_key=True)
    attribute_type = models.ForeignKey(AttributeType, on_delete=models.CASCADE, related_name="options")
    attribute_option_name = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.attribute_option_name


class Brand(models.Model):
    brand_id = models.AutoField(primary_key=True)
    brand_name = models.CharField(max_length=200, null=True, blank=True)
    brand_description = models.TextField(null=True, blank=True)

    def __str__(self):
        return self.brand_name


class Colour(models.Model):
    colour_id = models.AutoField(primary_key=True)
    colour_name = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.colour_name


class ProductCategory(models.Model):
    product_category_id = models.AutoField(primary_key=True)
    category_name = models.CharField(max_length=100, null=True, blank=True)
    category_image = models.CharField(max_length=400, null=True, blank=True)
    category_description = models.TextField(null=True, blank=True)
    parent_product_category = models.ForeignKey('self', on_delete=models.SET_NULL, null=True, blank=True, related_name="subcategories")

    def __str__(self):
        return self.category_name


class Product(models.Model):
    product_id = models.AutoField(primary_key=True)
    product_name = models.CharField(max_length=500, null=True, blank=True)
    product_category = models.ForeignKey(ProductCategory, on_delete=models.SET_NULL, null=True, related_name="products")
    product_description = models.TextField(null=True, blank=True)
    brand = models.ForeignKey(Brand, on_delete=models.SET_NULL, null=True, related_name="products")
    model_height = models.CharField(max_length=50, null=True, blank=True)
    model_wearing = models.CharField(max_length=50, null=True, blank=True)
    care_instructions = models.CharField(max_length=200, null=True, blank=True)
    about = models.CharField(max_length=200, null=True, blank=True)

    def __str__(self):
        return self.product_name


class ProductAttribute(models.Model):
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="attributes")
    attribute_option = models.ForeignKey(AttributeOption, on_delete=models.CASCADE, related_name="products")


class ProductImage(models.Model):
    image_id = models.AutoField(primary_key=True)
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="images")
    image_filename = models.CharField(max_length=400, null=True, blank=True)


class ProductItem(models.Model):
    product_item_id = models.AutoField(primary_key=True)
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="items")
    colour = models.ForeignKey(Colour, on_delete=models.SET_NULL, null=True, blank=True, related_name="items")
    original_price = models.IntegerField(null=True, blank=True)
    sale_price = models.IntegerField(null=True, blank=True)
    product_code = models.CharField(max_length=20, null=True, blank=True)


class ProductReview(models.Model):
    review_id = models.AutoField(primary_key=True)
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="reviews")
    review_title = models.CharField(max_length=100, null=True, blank=True)
    review_rating = models.IntegerField(null=True, blank=True)
    review_comment = models.TextField(null=True, blank=True)
    review_date = models.DateField(null=True, blank=True)


class RatingType(models.Model):
    rating_type_id = models.AutoField(primary_key=True)
    rating_name = models.CharField(max_length=20, null=True, blank=True)
    label_min = models.CharField(max_length=20, null=True, blank=True)
    label_max = models.CharField(max_length=20, null=True, blank=True)

    def __str__(self):
        return self.rating_name


class ReviewRatingType(models.Model):
    review = models.ForeignKey(ProductReview, on_delete=models.CASCADE, related_name="rating_types")
    rating_type = models.ForeignKey(RatingType, on_delete=models.CASCADE, related_name="reviews")
    rating_value = models.IntegerField(null=True, blank=True)


===========
imporved version

from django.db import models

class AttributeType(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.name


class AttributeOption(models.Model):
    id = models.AutoField(primary_key=True)
    attribute_type = models.ForeignKey(AttributeType, on_delete=models.CASCADE, related_name="options")
    name = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.name


class Brand(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=200, null=True, blank=True)
    description = models.TextField(null=True, blank=True)

    def __str__(self):
        return self.name


class Colour(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.name


class ProductCategory(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, null=True, blank=True)
    image = models.CharField(max_length=400, null=True, blank=True)
    description = models.TextField(null=True, blank=True)
    parent_category = models.ForeignKey('self', on_delete=models.SET_NULL, null=True, blank=True, related_name="subcategories")

    def __str__(self):
        return self.name


class Product(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=500, null=True, blank=True)
    category = models.ForeignKey(ProductCategory, on_delete=models.SET_NULL, null=True, blank=True, related_name="products")
    description = models.TextField(null=True, blank=True)
    brand = models.ForeignKey(Brand, on_delete=models.SET_NULL, null=True, blank=True, related_name="products")
    model_height = models.CharField(max_length=50, null=True, blank=True)
    model_wearing = models.CharField(max_length=50, null=True, blank=True)
    care_instructions = models.TextField(null=True, blank=True)
    about = models.TextField(null=True, blank=True)

    def __str__(self):
        return self.name


class ProductAttribute(models.Model):
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="attributes")
    option = models.ForeignKey(AttributeOption, on_delete=models.CASCADE)

    class Meta:
        unique_together = ('product', 'option')


class ProductImage(models.Model):
    id = models.AutoField(primary_key=True)
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="images")
    filename = models.CharField(max_length=400, null=True, blank=True)

    def __str__(self):
        return self.filename


class ProductItem(models.Model):
    id = models.AutoField(primary_key=True)
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="items")
    colour = models.ForeignKey(Colour, on_delete=models.SET_NULL, null=True, blank=True, related_name="items")
    original_price = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    sale_price = models.DecimalField(max_digits=10, decimal_places=2, null=True, blank=True)
    product_code = models.CharField(max_length=20, null=True, blank=True)

    def __str__(self):
        return self.product_code


class ProductReview(models.Model):
    id = models.AutoField(primary_key=True)
    product = models.ForeignKey(Product, on_delete=models.CASCADE, related_name="reviews")
    title = models.CharField(max_length=100, null=True, blank=True)
    rating = models.PositiveIntegerField(null=True, blank=True)
    comment = models.TextField(null=True, blank=True)
    date = models.DateField(null=True, blank=True)

    def __str__(self):
        return self.title


class SizeCategory(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, null=True, blank=True)

    def __str__(self):
        return self.name


class SizeOption(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, null=True, blank=True)
    sort_order = models.PositiveIntegerField(null=True, blank=True)
    category = models.ForeignKey(SizeCategory, on_delete=models.SET_NULL, null=True, blank=True, related_name="sizes")

    def __str__(self):
        return self.name


class ProductVariation(models.Model):
    id = models.AutoField(primary_key=True)
    product_item = models.ForeignKey(ProductItem, on_delete=models.CASCADE, related_name="variations")
    size = models.ForeignKey(SizeOption, on_delete=models.SET_NULL, null=True, blank=True, related_name="variations")
    qty_in_stock = models.PositiveIntegerField(null=True, blank=True)


class RatingType(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=20, null=True, blank=True)
    label_min = models.CharField(max_length=20, null=True, blank=True)
    label_max = models.CharField(max_length=20, null=True, blank=True)

    def __str__(self):
        return self.name


class ReviewRatingType(models.Model):
    review = models.ForeignKey(ProductReview, on_delete=models.CASCADE, related_name="rating_types")
    rating_type = models.ForeignKey(RatingType, on_delete=models.CASCADE, related_name="reviews")
    value = models.PositiveIntegerField(null=True, blank=True)

    class Meta:
        unique_together = ('review', 'rating_type')


=============
Admin display


from django.contrib import admin
from .models import (
    Product, ProductCategory, Brand, ProductItem, ProductImage, 
    ProductReview, ProductAttribute, AttributeOption, AttributeType, 
    Colour, SizeCategory, SizeOption, ProductVariation, RatingType, ReviewRatingType
)

@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    list_display = (
        'name', 'category', 'brand', 'model_height', 
        'model_wearing', 'get_attribute_count', 'get_image_count',
    )
    search_fields = ('name', 'category__name', 'brand__name')
    list_filter = ('category', 'brand')
    ordering = ('name',)
    readonly_fields = ('get_attribute_count', 'get_image_count')

    def get_attribute_count(self, obj):
        return obj.attributes.count()
    get_attribute_count.short_description = 'Attributes'

    def get_image_count(self, obj):
        return obj.images.count()
    get_image_count.short_description = 'Images'


@admin.register(ProductCategory)
class ProductCategoryAdmin(admin.ModelAdmin):
    list_display = ('name', 'parent_category', 'description')
    search_fields = ('name', 'parent_category__name')


@admin.register(Brand)
class BrandAdmin(admin.ModelAdmin):
    list_display = ('name', 'description')
    search_fields = ('name',)


@admin.register(ProductItem)
class ProductItemAdmin(admin.ModelAdmin):
    list_display = ('product', 'colour', 'original_price', 'sale_price', 'product_code')
    search_fields = ('product__name', 'product_code')
    list_filter = ('colour',)


@admin.register(ProductImage)
class ProductImageAdmin(admin.ModelAdmin):
    list_display = ('product', 'filename')
    search_fields = ('product__name', 'filename')


@admin.register(ProductReview)
class ProductReviewAdmin(admin.ModelAdmin):
    list_display = ('product', 'title', 'rating', 'date')
    search_fields = ('product__name', 'title')
    list_filter = ('rating', 'date')


@admin.register(ProductAttribute)
class ProductAttributeAdmin(admin.ModelAdmin):
    list_display = ('product', 'option')
    search_fields = ('product__name', 'option__name')


@admin.register(AttributeType)
class AttributeTypeAdmin(admin.ModelAdmin):
    list_display = ('name',)
    search_fields = ('name',)


@admin.register(AttributeOption)
class AttributeOptionAdmin(admin.ModelAdmin):
    list_display = ('name', 'attribute_type')
    search_fields = ('name', 'attribute_type__name')


@admin.register(Colour)
class ColourAdmin(admin.ModelAdmin):
    list_display = ('name',)
    search_fields = ('name',)


@admin.register(SizeCategory)
class SizeCategoryAdmin(admin.ModelAdmin):
    list_display = ('name',)
    search_fields = ('name',)


@admin.register(SizeOption)
class SizeOptionAdmin(admin.ModelAdmin):
    list_display = ('name', 'category', 'sort_order')
    search_fields = ('name', 'category__name')


@admin.register(ProductVariation)
class ProductVariationAdmin(admin.ModelAdmin):
    list_display = ('product_item', 'size', 'qty_in_stock')
    search_fields = ('product_item__product__name', 'size__name')
    list_filter = ('size',)


@admin.register(RatingType)
class RatingTypeAdmin(admin.ModelAdmin):
    list_display = ('name', 'label_min', 'label_max')
    search_fields = ('name',)


@admin.register(ReviewRatingType)
class ReviewRatingTypeAdmin(admin.ModelAdmin):
    list_display = ('review', 'rating_type', 'value')
    search_fields = ('review__title', 'rating_type__name')


==============
from django.views.generic import ListView, DetailView
from django.shortcuts import get_object_or_404
from django.db.models import Count
from .models import Product, ProductCategory

class ProductListView(ListView):
    model = Product
    template_name = 'product_list.html'
    context_object_name = 'products'
    paginate_by = 20

    def get_queryset(self):
        queryset = Product.objects.select_related('category', 'brand') \
                                   .prefetch_related('attributes__option', 'images') \
                                   .annotate(attribute_count=Count('attributes'), image_count=Count('images'))
        category_id = self.request.GET.get('category')
        if category_id:
            queryset = queryset.filter(category_id=category_id)
        return queryset

class ProductDetailView(DetailView):
    model = Product
    template_name = 'product_detail.html'
    context_object_name = 'product'

    def get_queryset(self):
        return Product.objects.select_related('category', 'brand') \
                              .prefetch_related('attributes__option', 'images', 'items', 'reviews')

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['related_products'] = Product.objects.filter(category=self.object.category).exclude(id=self.object.id)[:4]
        return context

# Example usage of a category filter
class ProductCategoryListView(ListView):
    model = ProductCategory
    template_name = 'product_category_list.html'
    context_object_name = 'categories'

    def get_queryset(self):
        return ProductCategory.objects.prefetch_related('products').annotate(product_count=Count('products'))

# Example URL patterns for these views
from django.urls import path
from . import views

urlpatterns = [
    path('products/', views.ProductListView.as_view(), name='product_list'),
    path('products/<int:pk>/', views.ProductDetailView.as_view(), name='product_detail'),
    path('categories/', views.ProductCategoryListView.as_view(), name='product_category_list'),
]

===================

improved version
from django.views.generic import ListView, DetailView
from django.shortcuts import get_object_or_404
from django.db.models import Count, Prefetch
from .models import Product, ProductCategory, ProductImage, ProductReview

class ProductListView(ListView):
    model = Product
    template_name = 'product_list.html'
    context_object_name = 'products'
    paginate_by = 20

    def get_queryset(self):
        queryset = Product.objects.select_related('category', 'brand') \
                                   .prefetch_related(
                                       Prefetch('attributes', to_attr='prefetched_attributes'),
                                       Prefetch('images', queryset=ProductImage.objects.only('id', 'filename'), to_attr='prefetched_images')
                                   ) \
                                   .annotate(
                                       attribute_count=Count('attributes', distinct=True),
                                       image_count=Count('images', distinct=True)
                                   )
        category_id = self.request.GET.get('category')
        if category_id:
            queryset = queryset.filter(category_id=category_id)
        return queryset

class ProductDetailView(DetailView):
    model = Product
    template_name = 'product_detail.html'
    context_object_name = 'product'

    def get_queryset(self):
        return Product.objects.select_related('category', 'brand') \
                              .prefetch_related(
                                  Prefetch('attributes__option', to_attr='prefetched_attributes'),
                                  Prefetch('images', queryset=ProductImage.objects.only('id', 'filename'), to_attr='prefetched_images'),
                                  Prefetch('reviews', queryset=ProductReview.objects.only('id', 'title', 'rating'), to_attr='prefetched_reviews'),
                                  'items'
                              )

    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['related_products'] = Product.objects.filter(
            category=self.object.category
        ).exclude(id=self.object.id).select_related('brand')[:4]
        return context

class ProductCategoryListView(ListView):
    model = ProductCategory
    template_name = 'product_category_list.html'
    context_object_name = 'categories'

    def get_queryset(self):
        return ProductCategory.objects.prefetch_related(
            Prefetch('products', queryset=Product.objects.only('id', 'name', 'category_id'))
        ).annotate(product_count=Count('products'))

# Example URL patterns for these views
from django.urls import path
from . import views

urlpatterns = [
    path('products/', views.ProductListView.as_view(), name='product_list'),
    path('products/<int:pk>/', views.ProductDetailView.as_view(), name='product_detail'),
    path('categories/', views.ProductCategoryListView.as_view(), name='product_category_list'),
]

============
improved FBV


from django.shortcuts import render, get_object_or_404
from django.core.paginator import Paginator
from django.db.models import Count, Prefetch
from .models import Product, ProductCategory, ProductImage, ProductReview

def product_list(request):
    category_id = request.GET.get('category')
    products = Product.objects.select_related('category', 'brand') \
                              .prefetch_related(
                                  Prefetch('attributes', to_attr='prefetched_attributes'),
                                  Prefetch('images', queryset=ProductImage.objects.only('id', 'filename'), to_attr='prefetched_images')
                              ) \
                              .annotate(
                                  attribute_count=Count('attributes', distinct=True),
                                  image_count=Count('images', distinct=True)
                              )
    if category_id:
        products = products.filter(category_id=category_id)

    # Pagination
    paginator = Paginator(products, 20)
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)

    return render(request, 'product_list.html', {'products': page_obj})

def product_detail(request, pk):
    product = get_object_or_404(
        Product.objects.select_related('category', 'brand') \
                       .prefetch_related(
                           Prefetch('attributes__option', to_attr='prefetched_attributes'),
                           Prefetch('images', queryset=ProductImage.objects.only('id', 'filename'), to_attr='prefetched_images'),
                           Prefetch('reviews', queryset=ProductReview.objects.only('id', 'title', 'rating'), to_attr='prefetched_reviews'),
                           'items'
                       ),
        pk=pk
    )

    # Related products: Fetching only products in the same category excluding the current one
    related_products = Product.objects.filter(
        category=product.category
    ).exclude(id=product.id).select_related('brand')[:4]

    context = {
        'product': product,
        'related_products': related_products,
    }
    return render(request, 'product_detail.html', context)

def product_category_list(request):
    categories = ProductCategory.objects.prefetch_related(
        Prefetch('products', queryset=Product.objects.only('id', 'name', 'category_id'))
    ).annotate(product_count=Count('products'))

    return render(request, 'product_category_list.html', {'categories': categories})

# Example URL patterns for these views
from django.urls import path
from . import views

urlpatterns = [
    path('products/', views.product_list, name='product_list'),
    path('products/<int:pk>/', views.product_detail, name='product_detail'),
    path('categories/', views.product_category_list, name='product_category_list'),
]


============
Templates
product_list.html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container my-5">
    <h1 class="mb-4">Product List</h1>

    <div class="row mb-3">
        <form method="get" class="col-12 col-md-6">
            <select name="category" class="form-select" onchange="this.form.submit()">
                <option value="">All Categories</option>
                {% for category in categories %}
                    <option value="{{ category.id }}" {% if category.id|string == request.GET.category %}selected{% endif %}>
                        {{ category.name }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </div>

    <div class="row g-4">
        {% for product in products %}
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="card h-100">
                    <img src="{{ product.prefetched_images.0.filename.url }}" class="card-img-top" alt="{{ product.name }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <p class="card-text">
                            <strong>Brand:</strong> {{ product.brand.name }}<br>
                            <strong>Category:</strong> {{ product.category.name }}<br>
                            <strong>Attributes:</strong> {{ product.attribute_count }}<br>
                            <strong>Images:</strong> {{ product.image_count }}
                        </p>
                        <a href="{% url 'product_detail' product.id %}" class="btn btn-primary">View Details</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="mt-4">
        {% if products.has_previous %}
            <a href="?page={{ products.previous_page_number }}" class="btn btn-secondary">&laquo; Previous</a>
        {% endif %}
        {% for num in products.paginator.page_range %}
            <a href="?page={{ num }}" class="btn {% if num == products.number %}btn-primary{% else %}btn-outline-primary{% endif %}">{{ num }}</a>
        {% endfor %}
        {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}" class="btn btn-secondary">Next &raquo;</a>
        {% endif %}
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


==============
product_detail.html

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product.name }}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container my-5">
    <h1 class="mb-4">{{ product.name }}</h1>
    <div class="row">
        <div class="col-md-6">
            <img src="{{ product.prefetched_images.0.filename.url }}" class="img-fluid" alt="{{ product.name }}">
        </div>
        <div class="col-md-6">
            <h3>Details</h3>
            <p><strong>Brand:</strong> {{ product.brand.name }}</p>
            <p><strong>Category:</strong> {{ product.category.name }}</p>
            <p><strong>Attributes:</strong></p>
            <ul>
                {% for attribute in product.prefetched_attributes %}
                    <li>{{ attribute.option.name }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="mt-5">
        <h3>Related Products</h3>
        <div class="row g-4">
            {% for related_product in related_products %}
                <div class="col-12 col-sm-6 col-lg-3">
                    <div class="card h-100">
                        <img src="{{ related_product.prefetched_images.0.filename.url }}" class="card-img-top" alt="{{ related_product.name }}">
                        <div class="card-body">
                            <h5 class="card-title">{{ related_product.name }}</h5>
                            <a href="{% url 'product_detail' related_product.id %}" class="btn btn-outline-primary">View</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

============
product_category_list.html

========
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Categories</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container my-5">
    <h1 class="mb-4">Product Categories</h1>
    <div class="row g-4">
        {% for category in categories %}
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="card h-100">
                    <div class="card-body">
                        <h5 class="card-title">{{ category.name }}</h5>
                        <p class="card-text">
                            <strong>Products:</strong> {{ category.product_count }}
                        </p>
                        <a href="{% url 'product_list' %}?category={{ category.id }}" class="btn btn-primary">View Products</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
==============

